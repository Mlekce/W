const mysql2 = require('mysql2/promise');
const getPool = require('./dbPool'); // assuming you exported the pool setup from another file

async function insertProduct(name, description, price, stock_quantity, category_id, image_url) {
    const pool = await getPool();

    try {
        const query = `
            INSERT INTO Products (name, description, price, stock_quantity, category_id, image_url)
            VALUES (?, ?, ?, ?, ?, ?)
        `;

        // Use placeholders to insert the actual values
        const [result] = await pool.execute(query, [name, description, price, stock_quantity, category_id, image_url]);

        console.log('Inserted product with ID:', result.insertId); // `insertId` is the ID of the newly inserted row
    } catch (err) {
        console.error('Error inserting product:', err);
    } finally {
        // You don't need to manually close the connection when using a pool
        // Pool will automatically handle it
    }
}

// Example usage
insertProduct('Smartphone', 'Latest model with amazing features', 499.99, 50, 1, 'https://example.com/smartphone.jpg');
